#!/usr/bin/python

import os
import sys
import json

# Read JSON from STDIN
j = json.load(sys.stdin)[0]

term_width = int(os.getenv('COLUMNS') or 78)

tags = ' '.join(j['tags'])
before_subj = "{date:11.11} {mfrom:18.18}  ".format(
    date = j['date_relative'],
    mfrom = j['headers']['From'])

print("{before}{subject:{subject_width}.{subject_width}} {tags}".format(
    before = before_subj,
    subject_width = term_width - len(before_subj) - 1 - len(tags),
    subject = j['headers']['Subject'],
    tags = tags))
